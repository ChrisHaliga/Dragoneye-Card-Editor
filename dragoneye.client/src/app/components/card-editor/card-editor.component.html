<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <span class="navbar-brand">Card Editor</span>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Cards</a></li>
        <li class="nav-item"><a class="nav-link active" href="#">Editor</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Main Layout -->
<div class="main-layout">
  <!-- Side Panel (Primary) - File & Hierarchy -->
  <div class="side-panel" [class.closed]="!isEditorOpen">
    <div class="panel-header">
      <span>Project Manager</span>
      <button class="btn btn-sm btn-outline-secondary" (click)="toggleEditor()">
        <i class="bi" [class.bi-chevron-compact-left]="isEditorOpen" [class.bi-chevron-compact-right]="!isEditorOpen"></i>
      </button>
    </div>

    <div class="panel-content" *ngIf="isEditorOpen">
      <!-- File Management -->
      <div class="section-card mb-3">
        <h6 class="section-title">File Settings</h6>
        <div class="mb-2">
          <label class="form-label">Filename</label>
          <input type="text" class="form-control form-control-sm" [(ngModel)]="cardData.filename" placeholder="my-cards.json">
        </div>
        <div class="d-flex gap-2">
          <button class="btn btn-success btn-sm flex-fill" (click)="saveData()">
            <i class="bi bi-floppy-fill me-1"></i> Save
          </button>
          <label class="btn btn-outline-primary btn-sm flex-fill mb-0" for="loadFile">
            <i class="bi bi-folder-open me-1"></i> Load
          </label>
          <input type="file" id="loadFile" class="d-none" accept=".json" (change)="loadFile($event)">
        </div>
      </div>

      <app-card-hierarchy 
        [cardData]="cardData"
        [selectedGroupIndex]="selectedGroupIndex"
        [selectedCardIndex]="selectedCardIndex"
        (cardSelected)="onCardSelected($event)"
        (cardAdded)="onCardAdded($event)">
      </app-card-hierarchy>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="content-area">
    <app-card-display [card]="currentCard" [elementSymbol]="currentElementSymbol" [noCardMessage]="noCardMessage"></app-card-display>

    <!-- Bottom Panel (Secondary) - Card Details -->
    <div class="bottom-panel" [class.closed]="!isBottomPanelOpen">
      <div class="panel-header">
        <span>{{ currentCard ? 'Edit: ' + currentCard.title : 'Card Editor' }}</span>
        <button class="btn btn-sm btn-outline-secondary" (click)="toggleBottomPanel()">
          <i class="bi" [class.bi-chevron-down]="isBottomPanelOpen" [class.bi-chevron-up]="!isBottomPanelOpen"></i>
        </button>
      </div>

      <div class="panel-content" *ngIf="isBottomPanelOpen && currentCard">
        <app-card-properties [card]="currentCard"></app-card-properties>
      </div>
    </div>
  </div>
</div>
